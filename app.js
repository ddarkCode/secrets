(()=>{"use strict";var e={175:(e,n,t)=>{t.d(n,{Z:()=>o});var r=t(81),a=t.n(r),i=t(645),s=t.n(i)()(a());s.push([e.id,"#google-button {\n  width: 405px;\n  height: 40px;\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n  background: none;\n  margin-top: 10px;\n}\n\n#google-button div {\n  width: 12%;\n  height: 40px;\n  background-color: #fff;\n  padding-left: 0;\n}\n\n#google-button img {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n}\n#google-button span {\n  width: 88%;\n  height: 100%;\n  background-color: #4081ec;\n  color: #fff;\n  text-align: center;\n  font-size: 18px;\n  letter-spacing: 2;\n  line-height: 1.7;\n}\n",""]);const o=s},696:(e,n,t)=>{t.d(n,{Z:()=>o});var r=t(81),a=t.n(r),i=t(645),s=t.n(i)()(a());s.push([e.id,".homepage-container {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n.lc {\n  width: 100%;\n  display: flex;\n  height: 70vh;\n  justify-content: center;\n}\n\n.logo-container {\n  width: 100%;\n  height: 100%;\n  background-color: #fff;\n}\n\n.logo-container img {\n  width: 100%;\n  object-fit: contain;\n  height: 100%;\n}\n\n.home-page-link {\n  display: flex;\n}\n\n#light,\n#dark {\n  width: 150px;\n  height: 50px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 18px;\n  font-weight: 400;\n  line-height: 1.7;\n  letter-spacing: 1.8;\n}\n\n#light {\n  background-color: #fff;\n  color: #000;\n  margin-right: 10px;\n}\n#light:hover {\n  text-decoration: none !important;\n  color: inherit !important;\n}\n#dark {\n  background-color: #000;\n  color: #fff;\n}\n\n#dark:hover {\n  text-decoration: none !important;\n  color: inherit !important;\n}\n\n#light:visited {\n  color: inherit !important;\n}\n\n#dark:visited {\n  color: #fff !important;\n}\n",""]);const o=s},105:(e,n,t)=>{t.d(n,{Z:()=>o});var r=t(81),a=t.n(r),i=t(645),s=t.n(i)()(a());s.push([e.id,".input-container {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.input-container label {\n  font-size: 15px;\n  font-weight: 400;\n  width: 100px;\n  height: 40px;\n  border: none;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: #fff;\n  border-right: 1px solid #e8ecef;\n}\n\n.input-container input {\n  width: 300px;\n  height: 40px;\n  border: none;\n  outline: none;\n}\n.input-container:first-child {\n  border-bottom: 1px solid #e8ecef;\n}\n",""]);const o=s},357:(e,n,t)=>{t.d(n,{Z:()=>o});var r=t(81),a=t.n(r),i=t(645),s=t.n(i)()(a());s.push([e.id,".secrets-main-page {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  min-height: 100vh;\n}\n\n.secrets-image-container {\n  background-color: #fff;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  height: 40vh;\n}\n\n.secrets-image-container div {\n  height: 80%;\n}\n.secrets-image-container div img {\n  object-fit: contain;\n  height: 100%;\n}\n.secrets-image-container p {\n  font-size: 18px;\n  margin-top: 10px;\n}\n\n.links {\n  position: fixed;\n  z-index: 1;\n  width: 100%;\n  top: 60px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: flex-end;\n}\n\n.links button {\n  width: 150px;\n  height: 50px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 18px;\n  font-weight: 400;\n  line-height: 1.7;\n  letter-spacing: 1.8;\n  border: none;\n  color: #fff;\n  background-color: #000;\n  margin-bottom: 10px;\n  cursor: pointer;\n}\n\n.list-of-secrets {\n  width: 100%;\n}\n\n.single-secret {\n  width: 100%;\n  background-color: #fff;\n  color: #000;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  flex-wrap: wrap;\n  margin-bottom: 10px;\n  min-height: 100px;\n  padding: 20px;\n}\n\n.secret-meta span:first-child {\n  margin-right: 30px;\n}\n\n.single-secret p {\n  font-size: 18px;\n  margin-top: 10px;\n}\n\n@media only screen and (max-width: 1000px) {\n  .secrets-image-container p {\n    font-size: 52px;\n  }\n  .secret-meta span {\n    font-size: 28px;\n    font-weight: 400;\n  }\n  .single-secret p {\n    font-size: 42px;\n  }\n}\n\n@media only screen and (max-width: 960px) {\n  .secrets-image-container p {\n    font-size: 18px;\n    margin-top: 10px;\n  }\n  .secret-meta span {\n    font-size: 21px;\n  }\n  .single-secret p {\n    font-size: 18px;\n  }\n}\n",""]);const o=s},794:(e,n,t)=>{t.d(n,{Z:()=>o});var r=t(81),a=t.n(r),i=t(645),s=t.n(i)()(a());s.push([e.id,".submit-container {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  min-height: 100vh;\n}\n\n.submit-landing-page {\n  background-color: #fff;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  height: 60vh;\n}\n\n.submit-landing-page p {\n  margin-top: 10px;\n  font-size: 21px;\n}\n\n.submit-secret {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n.form-group input {\n  width: 70vw;\n  height: 40px;\n  border: none;\n  outline: none;\n  margin-bottom: 5px;\n  margin-top: 40px;\n}\n\n.submit-secret button {\n  width: 300px;\n  height: 40px;\n  border: none;\n  outline: none;\n  margin-bottom: 10px;\n  background: none;\n  background-color: #fff;\n}\n/* #212529 */\n\n@media only screen and (max-width: 1000px) {\n  .submit-landing-page {\n    justify-content: center;\n  }\n  .submit-landing-page p {\n    font-size: 33px;\n    font-weight: 500;\n    line-height: 1.8;\n  }\n  .submit-secret {\n    margin-top: 200px;\n  }\n  .form-group input {\n    width: 90vw;\n    height: 100px;\n  }\n  .form-group input::placeholder {\n    font-size: 33px;\n  }\n\n  .submit-secret button {\n    /* width: 300px; */\n    height: 80px;\n    margin-top: 20px;\n    font-size: 33px;\n  }\n}\n",""]);const o=s},364:(e,n,t)=>{t.d(n,{Z:()=>o});var r=t(81),a=t.n(r),i=t(645),s=t.n(i)()(a());s.push([e.id,".auth {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-top: 100px;\n  min-height: 70vh;\n}\n.auth h1 {\n  font-size: 21px;\n  font-weight: 600;\n  margin-bottom: 20px;\n}\n\n.auth button {\n  font-size: 15px;\n  font-weight: 400;\n  width: 400px;\n  height: 40px;\n  border: none;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-bottom: 20px;\n  outline: none;\n}\n\n.auth a {\n  text-decoration: none;\n  color: inherit;\n  margin-bottom: 10px;\n  border-bottom: 1px solid #000;\n}\n.auth a:visited {\n  color: inherit;\n}\n\n.or {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 400px;\n}\n.or hr {\n  width: 46.5%;\n}\n",""]);const o=s},645:e=>{e.exports=function(e){var n=[];return n.toString=function(){return this.map((function(n){var t="",r=void 0!==n[5];return n[4]&&(t+="@supports (".concat(n[4],") {")),n[2]&&(t+="@media ".concat(n[2]," {")),r&&(t+="@layer".concat(n[5].length>0?" ".concat(n[5]):""," {")),t+=e(n),r&&(t+="}"),n[2]&&(t+="}"),n[4]&&(t+="}"),t})).join("")},n.i=function(e,t,r,a,i){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(r)for(var o=0;o<this.length;o++){var c=this[o][0];null!=c&&(s[c]=!0)}for(var u=0;u<e.length;u++){var l=[].concat(e[u]);r&&s[l[0]]||(void 0!==i&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=i),t&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=t):l[2]=t),a&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=a):l[4]="".concat(a)),n.push(l))}},n}},81:e=>{e.exports=function(e){return e[1]}},379:e=>{var n=[];function t(e){for(var t=-1,r=0;r<n.length;r++)if(n[r].identifier===e){t=r;break}return t}function r(e,r){for(var i={},s=[],o=0;o<e.length;o++){var c=e[o],u=r.base?c[0]+r.base:c[0],l=i[u]||0,p="".concat(u," ").concat(l);i[u]=l+1;var d=t(p),m={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==d)n[d].references++,n[d].updater(m);else{var f=a(m,r);r.byIndex=o,n.splice(o,0,{identifier:p,updater:f,references:1})}s.push(p)}return s}function a(e,n){var t=n.domAPI(n);return t.update(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap&&n.supports===e.supports&&n.layer===e.layer)return;t.update(e=n)}else t.remove()}}e.exports=function(e,a){var i=r(e=e||[],a=a||{});return function(e){e=e||[];for(var s=0;s<i.length;s++){var o=t(i[s]);n[o].references--}for(var c=r(e,a),u=0;u<i.length;u++){var l=t(i[u]);0===n[l].references&&(n[l].updater(),n.splice(l,1))}i=c}}},569:e=>{var n={};e.exports=function(e,t){var r=function(e){if(void 0===n[e]){var t=document.querySelector(e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}n[e]=t}return n[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}},216:e=>{e.exports=function(e){var n=document.createElement("style");return e.setAttributes(n,e.attributes),e.insert(n,e.options),n}},565:(e,n,t)=>{e.exports=function(e){var n=t.nc;n&&e.setAttribute("nonce",n)}},795:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var n=e.insertStyleElement(e);return{update:function(t){!function(e,n,t){var r="";t.supports&&(r+="@supports (".concat(t.supports,") {")),t.media&&(r+="@media ".concat(t.media," {"));var a=void 0!==t.layer;a&&(r+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),r+=t.css,a&&(r+="}"),t.media&&(r+="}"),t.supports&&(r+="}");var i=t.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),n.styleTagTransform(r,e,n.options)}(n,e,t)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)}}}},589:e=>{e.exports=function(e,n){if(n.styleSheet)n.styleSheet.cssText=e;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(e))}}}},n={};function t(r){var a=n[r];if(void 0!==a)return a.exports;var i=n[r]={id:r,exports:{}};return e[r](i,i.exports,t),i.exports}t.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},t.d=(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),t.nc=void 0,(()=>{const e=require("@babel/runtime/helpers/asyncToGenerator");var n=t.n(e);const r=require("@babel/runtime/regenerator");var a=t.n(r);const i=require("dotenv");var s=t.n(i);const o=require("express");var c=t.n(o);const u=require("react");var l=t.n(u);const p=require("morgan");var d=t.n(p);const m=require("debug");var f=t.n(m);const g=require("mongoose"),h=require("express-session");var v=t.n(h);const b=require("connect-mongodb-session");var x=t.n(b);const y=require("cors");var w=t.n(y);const E=require("react-router-config"),S=require("express-rate-limit");f()("index:errorHandler");const k=require("passport");var O=t.n(k);const j=require("mongoose-findorcreate");var A=t.n(j);const T=require("bcrypt");var P=new g.Schema({username:String,email:{type:String,require:!0},password:String,googleId:String},{timestamps:!0});P.plugin(A()),P.pre("save",n()(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isModified("password")){e.next=4;break}return e.next=3,(0,T.hash)(this.password,+process.env.PASSWORD_SALT);case 3:this.password=e.sent;case 4:case"end":return e.stop()}}),e,this)})))),P.methods.validatePassword=function(){var e=n()(a().mark((function e(n){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,T.compare)(n,this.password);case 2:return t=e.sent,console.log(t),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}();const D=(0,g.model)("User",P),q=require("passport-local"),N=require("node:crypto");f()("index:localStrategy");const C=require("passport-google-oauth20");var Z=t.n(C);s().config(),f()("index:googleStrategy");var I=process.env,z=I.GOOGLE_CLIENT_ID,R=I.GOOGLE_CLIENT_SECRET;function _(){return _=n()(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.use(O().initialize()),t.use(O().session()),O().serializeUser((function(e,n){return n(null,e)})),O().deserializeUser(function(){var e=n()(a().mark((function e(n,t){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D.findOne({email:n.email});case 3:return r=e.sent,e.abrupt("return",t(null,r));case 7:e.prev=7,e.t0=e.catch(0),t(null,!1,{message:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n,t){return e.apply(this,arguments)}}()),O().use("signup",new q.Strategy({usernameField:"email",passwordField:"password",passReqToCallback:!0},function(){var e=n()(a().mark((function e(n,t,r,i){var s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D.findOne({email:t});case 3:if(!e.sent){e.next=6;break}throw new Error("User With This Email Already Exist.");case 6:return s=new D({email:t,password:r,username:t.slice(0,2)+(0,N.randomUUID)().slice(0,7)}),e.next=9,s.save();case 9:return e.abrupt("return",i(null,s,{message:"Successful Registration."}));case 12:return e.prev=12,e.t0=e.catch(0),e.abrupt("return",i(e.t0,!1));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(n,t,r,a){return e.apply(this,arguments)}}())),O().use("signin",new q.Strategy({usernameField:"email",passwordField:"password",passReqToCallback:!0},function(){var e=n()(a().mark((function e(n,t,r,i){var s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D.findOne({email:t});case 3:if(s=e.sent){e.next=6;break}throw new Error("User Not Found.");case 6:if(s.validatePassword(r)){e.next=8;break}throw new Error("Wrong Password Provided.");case 8:return e.abrupt("return",i(null,s,{message:"Successfully Logged In."}));case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",i(e.t0,!1));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(n,t,r,a){return e.apply(this,arguments)}}())),O().use(new(Z())({clientID:z,clientSecret:R,callbackURL:"https://secrets-3r6m.onrender.com/api/auth/google/secrets",passReqToCallback:!0},(function(e,n,t,r,a){D.findOrCreate({googleId:r.id,email:r.emails[0].value,username:r.emails[0].value.slice(0,2)+(0,N.randomUUID)().slice(1,7)},(function(e,n){return a(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),_.apply(this,arguments)}const L=require("react-router-dom"),U=require("react-dom/server"),M=require("react-redux"),F=require("serialize-javascript");var H=t.n(F);const G=require("@babel/runtime/helpers/defineProperty");var W=t.n(G);const Y=require("@reduxjs/toolkit"),J=require("axios");var B=t.n(J),K=(0,Y.createAsyncThunk)("secrets/get_all_secrets",function(){var e=n()(a().mark((function e(n,t){var r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B().get("".concat($,"/secrets"));case 2:return r=e.sent,i=r.data,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),Q=(0,Y.createAsyncThunk)("secrets/post_new_secret",function(){var e=n()(a().mark((function e(n,t){var r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B().post("".concat($,"/secrets"),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),V=(0,Y.createSlice)({name:"secrets",initialState:{secrets:[]},reducers:{},extraReducers:function(e){e.addCase(K.fulfilled,(function(e,n){e.secrets=n.payload})),e.addCase(Q.fulfilled,(function(e,n){e.secrets=e.secrets.concat(n.payload)}))}});V.actions;const X=V.reducer;var $="https://secrets-3r6m.onrender.com/api",ee=(0,Y.createAsyncThunk)("auth/signup",function(){var e=n()(a().mark((function e(n,t){var r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B().post("".concat($,"/auth/signup"),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),ne=(0,Y.createAsyncThunk)("auth/signin",function(){var e=n()(a().mark((function e(n,t){var r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B().post("".concat($,"/auth/signin"),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),te=(0,Y.createAsyncThunk)("auth/signout",function(){var e=n()(a().mark((function e(n,t){var r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B().get("".concat($,"/auth/signout"));case 2:return r=e.sent,i=r.data,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),re=(0,Y.createAsyncThunk)("auth/profile",function(){var e=n()(a().mark((function e(n,t){var r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B().get("".concat($,"/auth/profile"));case 2:return r=e.sent,i=r.data,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),ae=(0,Y.createSlice)({name:"auth",initialState:{user:null},reducers:{},extraReducers:function(e){e.addCase(ee.fulfilled,(function(e,n){e.user=n.payload})),e.addCase(ne.fulfilled,(function(e,n){e.user=n.payload})),e.addCase(te.fulfilled,(function(e,n){e.user=n.payload})),e.addCase(re.fulfilled,(function(e,n){e.user=n.payload}))}});ae.actions;const ie=ae.reducer;var se=t(379),oe=t.n(se),ce=t(795),ue=t.n(ce),le=t(569),pe=t.n(le),de=t(565),me=t.n(de),fe=t(216),ge=t.n(fe),he=t(589),ve=t.n(he),be=t(696),xe={};xe.styleTagTransform=ve(),xe.setAttributes=me(),xe.insert=pe().bind(null,"head"),xe.domAPI=ue(),xe.insertStyleElement=ge(),oe()(be.Z,xe),be.Z&&be.Z.locals&&be.Z.locals;const ye=function(e){var n=e.id,t=e.link,r=e.text;return l().createElement(L.Link,{id:n,to:t},r)},we=require("@babel/runtime/helpers/extends");var Ee=t.n(we);const Se=function(e){e._id;var n=e.username,t=e.createdAt,r=e.secret;return l().createElement("div",{className:"single-secret"},l().createElement("div",{className:"secret-meta"},l().createElement("span",null,n),l().createElement("span",null,new Date(t).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}))),l().createElement("p",null,r))};var ke=t(357),Oe={};Oe.styleTagTransform=ve(),Oe.setAttributes=me(),Oe.insert=pe().bind(null,"head"),Oe.domAPI=ue(),Oe.insertStyleElement=ge(),oe()(ke.Z,Oe),ke.Z&&ke.Z.locals&&ke.Z.locals;const je={component:function(){var e=(0,M.useDispatch)(),n=(0,L.useHistory)();(0,u.useEffect)((function(){e(K())}),[]);var t=(0,M.useSelector)((function(e){return e.secrets.secrets}));return console.log(t),l().createElement("div",{className:"secrets-main-page"},l().createElement("div",{className:"secrets-image-container"},l().createElement("div",null,l().createElement("img",{src:"/secretslogo.png"})),l().createElement("p",null,"You've Discovered All Secrets!")),l().createElement("hr",null),l().createElement("div",{className:"links"},l().createElement("button",{className:"signout light",onClick:function(){e(te()),n.push("/pages/signin")}},"Signout"),l().createElement(ye,{id:"dark",link:"/pages/submit",text:"Submit a Secret"})),l().createElement("hr",null),l().createElement("section",{className:"list-of-secrets"},t.map((function(e){return l().createElement(Se,Ee()({key:e._id},e))}))))},loadData:function(e){return e.dispatch(K())}},Ae=require("@babel/runtime/helpers/slicedToArray");var Te=t.n(Ae);const Pe=require("lodash");var De=t(105),qe={};qe.styleTagTransform=ve(),qe.setAttributes=me(),qe.insert=pe().bind(null,"head"),qe.domAPI=ue(),qe.insertStyleElement=ge(),oe()(De.Z,qe),De.Z&&De.Z.locals&&De.Z.locals;const Ne=function(e){var n=e.type,t=e.text,r=e.onChange,a=e.value;return l().createElement("div",{className:"input-container"},l().createElement("label",{htmlFor:t},(0,Pe.capitalize)(t)),l().createElement("input",{id:t,type:n,name:t,value:a,onChange:r}))},Ce=function(e){var n=e.onSubmit,t=e.children;return l().createElement("form",{onSubmit:n},t)};var Ze=t(175),Ie={};Ie.styleTagTransform=ve(),Ie.setAttributes=me(),Ie.insert=pe().bind(null,"head"),Ie.domAPI=ue(),Ie.insertStyleElement=ge(),oe()(Ze.Z,Ie),Ze.Z&&Ze.Z.locals&&Ze.Z.locals;const ze=function(){return l().createElement("button",{id:"google-button",onClick:function(){return window.location.href="/api/auth/google"},role:"button"},l().createElement("div",null," ",l().createElement("img",{src:"/google-img.png"})),l().createElement("span",null,"Sign In With Google"))};var Re=t(364),_e={};function Le(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Ue(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Le(Object(t),!0).forEach((function(n){W()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Le(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}_e.styleTagTransform=ve(),_e.setAttributes=me(),_e.insert=pe().bind(null,"head"),_e.domAPI=ue(),_e.insertStyleElement=ge(),oe()(Re.Z,_e),Re.Z&&Re.Z.locals&&Re.Z.locals;function Me(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Fe(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Me(Object(t),!0).forEach((function(n){W()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Me(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var He=t(794),Ge={};Ge.styleTagTransform=ve(),Ge.setAttributes=me(),Ge.insert=pe().bind(null,"head"),Ge.domAPI=ue(),Ge.insertStyleElement=ge(),oe()(He.Z,Ge),He.Z&&He.Z.locals&&He.Z.locals;const We={component:function(){var e=(0,u.useState)(""),n=Te()(e,2),t=n[0],r=n[1],a=(0,M.useDispatch)(),i=(0,L.useHistory)();return l().createElement("div",{className:"submit-container"},l().createElement("div",{className:"submit-landing-page"},l().createElement("div",null,l().createElement("img",{src:"/secretslogo.png"})),l().createElement("p",null,"Don't keep your secrets, share them anonymously!")),l().createElement("form",{onSubmit:function(e){e.preventDefault(),a(Q({secret:t})),r(""),i.push("/pages/secrets")},className:"submit-secret"},l().createElement("div",{className:"form-group"},l().createElement("input",{type:"text",className:"form-control text-center",name:"secret",placeholder:"What's your secret?",value:t,onChange:function(e){r(e.target.value)}})),l().createElement("button",{type:"submit"},"Submit")))}};function Ye(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Je(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Ye(Object(t),!0).forEach((function(n){W()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ye(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}const Be=[{component:function(e){var n=e.route,t=(0,M.useDispatch)();return(0,u.useEffect)((function(){t(re())}),[]),l().createElement("div",null,(0,E.renderRoutes)(n.routes))},routes:[{component:function(){return l().createElement("div",{className:"homepage-container"},l().createElement("div",{className:"lc"},l().createElement("div",{className:"logo-container"},l().createElement("img",{src:"/logo.png",alt:"logo"}))),l().createElement("hr",null),l().createElement("div",{className:"home-page-link"},l().createElement(ye,{id:"light",link:"/pages/signup",text:" Signup"}),l().createElement(ye,{id:"dark",link:"/pages/signin",text:"Signin"})))},path:"/",exact:!0},{component:function(){var e=(0,u.useState)({email:"",password:""}),n=Te()(e,2),t=n[0],r=n[1],a=(0,M.useDispatch)(),i=(0,L.useHistory)(),s=(0,M.useSelector)((function(e){return e.auth.user}));function o(e){var n=e.target,t=n.name,a=n.value;r((function(e){return Fe(Fe({},e),{},W()({},t,a))}))}return l().createElement(l().Fragment,null,s?l().createElement(L.Redirect,{to:"/pages/secrets"}):l().createElement("div",{className:"auth"},l().createElement("h1",null,"Signup"),l().createElement(L.Link,{to:"/pages/signin"},"Already Have An Account? Signin"),l().createElement(Ce,{onSubmit:function(e){e.preventDefault(),a(ee(t)),i.push("/pages/secrets")}},l().createElement(Ne,{type:"email",text:"email",onChange:o,value:t.email}),l().createElement(Ne,{type:"password",text:"password",onChange:o,value:t.password}),l().createElement("button",{type:"submit",className:"btn btn-dark"},"Signup")),l().createElement("div",{className:"or"},l().createElement("hr",null),l().createElement("span",null,"Or"),l().createElement("hr",null)),l().createElement(ze,null)))},path:"/pages/signup"},{component:function(){var e=(0,u.useState)({email:"",password:""}),n=Te()(e,2),t=n[0],r=n[1],a=(0,M.useDispatch)(),i=(0,L.useHistory)(),s=(0,M.useSelector)((function(e){return e.auth.user}));function o(e){var n=e.target,t=n.name,a=n.value;r((function(e){return Ue(Ue({},e),{},W()({},t,a))}))}return l().createElement(l().Fragment,null,s?l().createElement(L.Redirect,{to:"/pages/secrets"}):l().createElement("div",{className:"auth"},l().createElement("h1",null,"Signin"),l().createElement(L.Link,{to:"/pages/signup"},"Don't Have An Account? Signup"),l().createElement(Ce,{onSubmit:function(e){e.preventDefault(),a(ne(t)),i.push("/pages/secrets")}},l().createElement(Ne,{type:"email",text:"email",onChange:o,value:t.email}),l().createElement(Ne,{type:"password",text:"password",onChange:o,value:t.password}),l().createElement("button",{type:"submit",className:"btn btn-dark"},"Signin")),l().createElement("div",{className:"or"},l().createElement("hr",null),l().createElement("span",null,"Or"),l().createElement("hr",null)),l().createElement(ze,null)))},path:"/pages/signin"},Je(Je({},je),{},{path:"/pages/secrets"}),Je(Je({},We),{},{path:"/pages/submit"})]}];f()("index:auth");var Ke=new g.Schema({secret:{type:String,require:!0},username:{type:String,require:!0},replies:{type:Array,default:[]}},{timestamps:!0});const Qe=(0,g.model)("Secret",Ke);f()("index:secretRoutes"),s().config();var Ve,Xe,$e=f()("index"),en=x()(v()),nn=process.env,tn=(nn.MONGO_LOCAL,nn.MONGO_CLOUD),rn=nn.SESSION_SECRET,an=nn.FRONTEND_URL,sn=process.env.PORT||4444,on=c()(),cn=(0,S.rateLimit)({windowMs:9e5,limit:100,standardHeaders:"draft-7",legacyHeaders:!1,validate:{trustProxy:!0}}),un=new en({uri:tn,collection:"secretsSessions"});on.use(v()({secret:rn,resave:!1,saveUninitialized:!1,store:un,cookie:{maxAge:31104e6}})),function(e){_.apply(this,arguments)}(on),on.set("trust proxy",!0),on.use(c().static("public")),on.use(c().json()),on.use(c().urlencoded({extended:!0})),on.use(d()("dev")),on.use(cn),on.use(w()({origin:an,credentials:!0})),on.use("/api/auth",((Ve=(0,o.Router)()).route("/signup").post((function(e,n,t){O().authenticate("signup",(function(r,a,i){r&&t(r),e.login(a,(function(e){t(e)}));var s=a.email,o=a._id,c=a.username,u=a.createdAt;return n.status(201).json({email:s,_id:o,username:c,createdAt:u})}))(e,n,t)})),Ve.route("/signin").post((function(e,n,t){O().authenticate("signin",(function(r,a,i){r&&t(r),e.login(a,(function(e){e&&t(e);var r=a.email,i=a._id,s=a.username,o=a.createdAt;return n.status(200).json({email:r,_id:i,username:s,createdAt:o})}))}))(e,n,t)})),Ve.route("/signout").get((function(e,n,t){e.logout((function(e){e&&t(e),n.status(200).json(null)}))})),Ve.route("/profile").get((function(e,n,t){if(e.isAuthenticated()){var r=e.user,a=r.email,i=r._id,s=r.username,o=r.createdAt;return n.status(200).json({email:a,_id:i,username:s,createdAt:o})}n.status(403).json(null)})),Ve.route("/google").get(O().authenticate("google",{scope:["profile","email"]})),Ve.route("/google/secrets").get((function(e,n,t){O().authenticate("google",(function(r,a,i){r&&t(r),e.login(a,(function(e){return e&&t(e),a.email,a._id,a.createdAt,a.username,n.status(302).redirect("/pages/secrets")}))}))(e,n,t)})),Ve)),on.use("/api/secrets",((Xe=(0,o.Router)()).route("/").get(function(){var e=n()(a().mark((function e(n,t,r){var i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Qe.find({});case 3:return i=e.sent,e.abrupt("return",t.status(200).json(i.reverse()));case 7:e.prev=7,e.t0=e.catch(0),r(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n,t,r){return e.apply(this,arguments)}}()).post(function(){var e=n()(a().mark((function e(n,t,r){var i,s,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!n.isAuthenticated()){e.next=10;break}return i=n.body.secret,s=n.user.username,e.next=6,Qe.create({secret:i,username:s});case 6:return o=e.sent,e.abrupt("return",t.status(201).json(o));case 10:throw new Error("You Must Signin Before Posting A Secret");case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),r(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(n,t,r){return e.apply(this,arguments)}}()),Xe)),on.get("*",(function(e,n){var t=(0,Y.configureStore)({reducer:{auth:ie,secrets:X}}),r=(0,E.matchRoutes)(Be,e.path).map((function(e){var n=e.route;return e.match,n.loadData?n.loadData(t):Promise.resolve(null)}));Promise.all(r).then((function(){var r={},a=function(e,n,t){var r=(0,U.renderToString)(l().createElement(M.Provider,{store:n},l().createElement(L.StaticRouter,{location:e.path,context:t},(0,E.renderRoutes)(Be))));return'\n <!DOCTYPE html>\n<html lang="en" dir="ltr">\n  <head>\n    <meta charset="utf-8" />\n    <title>Secrets</title>\n    <link\n      rel="stylesheet"\n      href="https://use.fontawesome.com/releases/v5.6.3/css/all.css"\n      integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/"\n      crossorigin="anonymous"\n    />\n    <link\n      rel="stylesheet"\n      href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css"\n      integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS"\n      crossorigin="anonymous"\n    />\n    <link rel="stylesheet" href="/css/styles.css" />\n  </head>\n\n  <body>\n    <div id="root">'.concat(r,"</div>\n\n\n     <script>\n       window.INITIAL_STATE = ").concat(H()(n.getState()),'\n    <\/script>\n    <script src="/bundle.js"><\/script>\n  </body>\n</html>\n\n  \n  ')}(e,t,r);return r.url?n.redirect(301,r.url):(r.notFound&&n.status(404),n.send(a))}))})),on.use((function(e,n,t,r){if(t.headersSent)return r(e);var a=e.statusCode||500,i=e.message||"Internal server error";return t.status(a).json({message:i})})),on.listen(sn,(function(){var e;$e("Server is running on ".concat(sn)),(e=n()(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,g.connect)(tn);case 3:$e("Database Connected Successfully."),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),$e("An Error Occurred While Connecting To Database ".concat(JSON.stringify(e.t0)));case 9:case"end":return e.stop()}}),e,null,[[0,6]])}))),function(){return e.apply(this,arguments)})()}))})()})();